<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/help.css" rel="stylesheet" type="text/css">
    <title>Help Page</title>
</head>
<body>
<header>
    <div class="header">
        <img class="logo-img" src="../img/nola.png" alt="Nola"/>
        <h1>OpenCola Help</h1>
    </div>
</header>
<nav>
    <a href="#personas">Personas</a>
    <a href="#feed">Feed</a>
    <a href="#peers">Peers</a>
    <a href="#extension">Browser&nbsp;Extension</a>
    <a href="#mobile">Mobile</a>
    <a href="#certificates">Certificates</a>
    <a href="#access">Anywhere&nbsp;Access</a>
</nav>
<div class="centered">
    <div class="content">
        <section id="personas">
            <h2>Personas</h2>
            <p>
                Personas give you ways to organize your conversations with Peers. Each persona can have a unique set of
                Peers to connect with. It's like having separate identities you can share with people for different
                purposes.
            </p>

            <p>
                The main Persona selector can be found at the top of most pages of OpenCola. Use it to quickly switch
                between your feeds and peers. This is how you tell which Persona is currently active.
            </p>

            <p>
                On your feed when "All" personas is selected, there's also a Persona selector in the action bar below
                each
                post. This one lets you quickly take action as a Persona when you save, comment, tag, etc. It's most
                useful
                for transferring posts between Personas. If you wanted to save a post from your Work persona to your
                Crochet
                Clan persona you would just find the post, choose "Crochet Clan" in the selector and click the "Save"
                icon.
            </p>

            <div class="centered">
                <img class="example-img" src="img/persona-selector.png" alt="Persona Selector"/>
            </div>

            <p>
                To add or edit a persona use the Persona selector and choose <strong>Manage</strong>. This will take you
                to the Persona page.
            </p>

            <p>
                You can use the <img class="inline-icon" src="../img/add-peer.png" alt="Peers"> icon at the top right of
                the page to add a persona or choose <strong>Edit</strong>
                below any of your personas to change details.
            </p>

            <div class="centered">
                <img class="example-img" src="img/set-info.png" alt="Set Info">
            </div>

            <p>The fields for each persona are:</p>

            <table>
                <thead>
                <tr>
                    <th class="center-text">Field</th>
                    <th>Description</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/user.png" alt="User"/></td>
                    <td>Name that shows up persona controls</td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/id.png" alt="Id"/></td>
                    <td>Globally unique OpenCola user id - not changeable</td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/key.png" alt="Key"/></td>
                    <td>A cryptographic public key used to encrypt and sign data - not changeable yet</td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/link.png" alt="Address"/></td>
                    <td>
                        The address at which peers can request data from you. Default is to use the OpenCola relay
                        server (see [Managing Peers](#managing-peers) for more details)
                    </td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/photo.png" alt="Image"/></td>
                    <td>Url of image for your picture. This has to be a web link right now.</td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/refresh.png" alt="Synchronize"/></td>
                    <td>Whether the user is actively being synchronized (more later)</td>
                </tr>
                </tbody>
            </table>

            <p>
                Each Persona has its own set of <strong>Peers</strong>. To start adding people to your Personas network
                just use the Persona selector at the top of the page and navigate to your <strong>Peers</strong> with
                <img class="inline-icon" src="../img/peers.png" alt="Peers">
            </p>

            <div class="centered">
                <img class="example-img" src="img/manage-peers-arrow.png" alt="Manage Peers">
            </div>

            <p>
                If you would like to have a private Persona, for taking notes, etc., simply uncheck the sync option
                <img class="inline-icon" src="../img/refresh.png" alt="Refresh"/> for the persona. This will ensure that
                no
                data is sent / received
                to any peer for this persona.
            </p>

        </section>
        <section id="feed">
            <h2>Feed</h2>
            <p>
                You can add items to your feed by using the toolbar or creating organic (not tied to a url) posts using
                the
                <img class="inline-icon" src="../img/new-post.png" alt="New Post"/> button at the top right of the feed
                page.
            </p>

            <p>
                TIP: When you create an item using the <img class="inline-icon" src="../img/new-post.png"
                                                            alt="New Post"/>
                button, if the only thing you enter is a link in the description field, it will automatically extract
                the
                title, image and description from the page, similar to how the toolbar saves pages. This is especially
                useful
                on mobile, where there isn't
                a toolbar.
            </p>

            <p>
                Once you've added to your feed, it will look something like (annotations in red):
            </p>

            <div class="centered">
                <img class="example-img" src="img/annotated-post.png" alt="Annotated Post"/>
            </div>

            <p>
                You can see activity for the post as well as take action by using the action bar at the bottom. If you
                click
                the action icon, the corresponding action will be taken. Underlined (with a grey bar) action icons
                indicate
                actions that you have taken yourself. The number beside the icon indicates how many actions of that type
                have occured. You can see the individual actions by clicking expand
                (<img class="inline-icon" src="../img/show.png" alt="Show More"/>) icon.
            </p>

            <table>
                <thead>
                <tr>
                    <th class="center-text">Action</th>
                    <th>Description</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/save.png" alt="Save"/></td>
                    <td>Save the post. This essentially copies the post and allows any of your peers to see it as if it
                        came
                        from you.
                    </td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/like.png" alt="Like"/></td>
                    <td>Like the post (save post implicitly)</td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/tag.png" alt="Tag"/></td>
                    <td>Add tags to the post</td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/attach.png" alt="Attach"/></td>
                    <td>Attach files to the post. These files will be propagated to peers. If images are attached, they
                        are
                        rendered as part of the post body. Other file types are rendered as links.
                    </td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/comment.png" alt="Comment"/></td>
                    <td>Comment on the post (save post implicitly)</td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/edit.png" alt="Edit"/></td>
                    <td>Edit the post. Gives you an option to delete the post (if it was yours)</td>
                </tr>
                </tbody>
            </table>

            <p>
                You can search your feed by entering a query in the search box. Currently, search is exact match only,
                but
                will be improved in the future.
            </p>

        </section>
        <section id="peers">
            <h2>Peers</h2>

            <p>
                To add a peer, click the <img class="inline-icon" src="../img/peers.png" alt="Peers"/> icon at the top
                right
                of your feed and
                then click the <img class="inline-icon" src="../img/add-peer.png" alt="Add Peer"/> icon.
            </p>

            <div class="centered">
                <img class="example-img" src="img/adding-peer.png" alt="Adding Peer"/>
            </div>

            <p>
                Copy the token beside "Give this token to your peer:" and give it to a peer (via Signal, email, sms,
                etc).
                Enter the token you receive from the peer in the other box. Click "Add" - edit the name and image url if
                desired, and then click "Save". You don't need to keep your browser open while waiting for a token from
                your
                peer - you can re-open the view whenever you get the token.
            </p>

            <p>
                By default, you will be using the OpenCola Relay server (ocr://relay.opencola.net) to communicate with
                peers. Communication is end to end encrypted, but does travel through a central server. There are more
                advanced options (Tor, ZeroTier VPN) that will be documented, but are not for the faint of heart, so we
                default to the relay server as a "batteries included" solution.
            </p>

            <p>
                You can "disconnect" from a peer without losing any of the posts your have accumulated by unchecking the
                box beside the <img class="inline-icon" src="../img/refresh.png" alt="Refresh"/> icon for the peer. If
                you want to completely disconnect, edit the peer and click "Delete".
            </p>
        </section>
        <section id="extension">
            <h2>Browser Extension</h2>
            <p>
                OpenCola has a browser extension that makes it easier to interact with web pages. It currenlty only
                works with Chrome based browsers (e.g. Chrome, Chromium, Brave, Edge). We will provide other extnsions
                in the future. As well, the extension is a manual install and we will provide the extension in the Web
                Store in a future release.
            </p>

            <p>
                To start,
                <a href="../extension/OpenCola-Chrome.zip">download the extension</a> and place it in your home direcory
                (or anywhere you
                prefer). Then go to your browsers extensions page, by clicking the menu icon on the far right of the url
                bar (the icon with 3 horizontal lines or 3 dots), and selecting extensions:
            </p>

            <div class="centered">
                <img class="example-img" src="img/chrome-customize-menu.png" alt="Customize Chrome"/>
            </div>

            <p>
                In Brave, this looks like (other browser will be very similar):
            </p>

            <div class="centered">
                <img class="example-img" src="img/manageExtensions.png" alt="Manage Extensions"/>
            </div>

            <p>
                Click the "Developer mode" slider near the top right:
            </p>

            <div class="centered">
                <img class="example-img" src="img/enableDeveloperMode.png" alt="Enable Developer Mode"/>
            </div>

            <p>
                Click "Load Unpacked" and select the folder $OPENCOLA/chrome.
            </p>

            <div class="centered">
                <img class="example-img" src="img/openColaExtensionEnabled.png" alt="Enable Extension"/>
            </div>

            <p>
                Lastly, pin the extension to your toolbar (so it's always visible) by clicking the extension icon (the
                puzzle piece) and click the pin beside OpenCola:
            </p>

            <div class="centered">
                <img class="example-img" src="img/pinExtension.png" alt="Pin Extension"/>
            </div>

            <p>
                If you would like to use the extension on a different computer than where the server is running, install
                the
                extension and then set the service url in the extension's options to point to the server:
            </p>

            <ol>
                <li>Right-click the extension</li>
                <li>Select "Options"</li>
                <li>Edit the "Service Host" field</li>
                <li>Hit "Return" or click the "Save Button"</li>
            </ol>

            <div class="centered">
                <img class="example-img" src="img/extension-options.png" alt="Extension Options"/>
            </div>

            <p>
                To use the extension, click the OpenCola icon in the toolbar:
            </p>

            <div class="centered">
                <img class="example-img" src="img/extensionToolbar.png" alt="Extension Toolbar"/>
            </div>

            <p>
                The various icons mean:
            </p>

            <table>
                <thead>
                <tr>
                    <th class="center-text">Icon</th>
                    <th>Description</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="center-text"><img class="icon" src="img/green-light-icon.png" alt="Status Icon"/></td>
                    <td>
                        Status of the extension. Green means all good, yellow means working, and red means error. Check
                        the Javascript console for more info on error.
                    </td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/save.png" alt="Save"/></td>
                    <td>Save the current page (Add to feed, store archive, and index for search)</td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/like.png" alt="Like"/></td>
                    <td>Like the current page (saves page implicitly)</td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="../img/trust.png" alt="Trust"/></td>
                    <td>Trust the current page (saves page implicitly)</td>
                </tr>
                <tr>
                    <td class="center-text"><img class="icon" src="img/search.png" alt="Comment"/></td>
                    <td>Go to search / feed page</td>
                </tr>
                </tbody>
            </table>

            <p>
                Use the Persona selector to choose where you want to save your item (see section on <a href="#personas">Personas</a>)
            </p>
        </section>
        <section id="mobile">
            <h2>Mobile</h2>
            <p>
                We currently do not have native mobile apps, but we are working on them. In the meantime, to access
                OpenCola
                on a mobile device, simply navigate to one of the (non-local) urls listed at startup (if you want to use
                https, see <a href="#certificates">certificates</a> below). This works when on the same LAN
                as
                your server. To access anywhere, see the next section.
            </p>
        </section>
        <section id="certificates">
            <h2>Certificates</h2>
            <p>
                The first time you start OpenCola, it will generate certificates so that you can access the application
                over
                https without security warnings. These certificates will be placed in your storage/cert (in
                ~/Library/Application Support/OpenCola on Mac, $home\AppData\Local\OpenCola on Windows, or
                ~/.opencola/storage/cert on Linux). If you ever need to generate new ones, delete the generated files
                (opencola-ssl*) and restart your server. This will create new certificates and prompt you to install on
                the
                local machine.
            </p>

            <p>
                For any other device, you will need to copy and add the certificates manually (in the future, with
                mobile
                apps, this won't be required). If you're not concerned about security (e.g. if you're on your local
                network
                or using ZeroTier), you can just use the http access links and skip the install steps below.
            </p>

            The sections below describe how to install the certificate on various devices:

            <details>
                <summary>Computer</summary>
                <p>
                    To access OpenCola over https from another computer, copy the `install-cert` (or `install-cert.ps1`
                    on
                    Windows) and `opencola-ssl.der` to the same directory on the computer and run:
                </p>
                <pre>./install-cert</pre>
            </details>
            <details>
                <summary>iOS</summary>
                <ol>
                    <li>From ~/.opencola/storage/cert, copy `opencola-ssl.pem` to your device. The simplest way to do
                        this is just to mail it to your device as an attachment and then save it to your local files.
                    </li>
                    <li>Open "Files" (Swipe down on your main menu, type files into the search and then open the app)
                    </li>
                    <li>In Locations, select "On My iPhone", then "Downloads"</li>
                    <li>Tap `opencola-ssl.pem`. A dialog will tell you that the profile has been downloaded</li>
                    <li>Open "Settings". Under your name, tap the "Profile Downloaded" section</li>
                    <li>Click "install" at the top right of the resulting "Install Profile" page</li>
                    <li>Enter your passcode (if needed)</li>
                    <li>Click "Install" at the top right (and in the next dialog)</li>
                    <li>Go back to the "Settings" homepage, then to "General" -> "About"</li>
                    <li>Scroll to the bottom and tap "Certificate and Trust Settings"</li>
                    <li>Tap the slider next to "OpenCola" and click "Continue"</li>
                </ol>
            </details>
            <details>
                <summary>Android</summary>
                <ol>
                    <li>From ~/.opencola/storage/cert, copy `opencola-ssl.der` to `opencola-ssl.crt` and then transfer
                        it to your device. The simplest way to do this is just to mail it to your device as an
                        attachment and then save it to your local files.
                    </li>
                    <li>On your Android admin dashboard go to Settings > Security</li>
                    <li>
                        Under Credential Storage click on Install from Phone Storage/Install from SD Card
                        <b>Note: if you don’t have this option, navigate to Advanced Settings > Security or Advanced
                            Settings > Privacy and click on Install from Phone Storage/Install from SD Card.</b>
                    </li>
                    <li>The File Storage Manager will appear. Locate your SSL Certificate from your device</li>
                    <li>In the Certificate Name field, enter a friendly name for your certificate</li>
                    <li>Under Credential Use select VPN and Apps or Wi-Fi based on your security requirements.</li>
                </ol>

            </details>
        </section>
        <section id="access">
            <h2>Accessing OpenCola From Anywhere</h2>
            <p>
                We currently have not built any services that allow you to access you OpenCola server from anywhere
                (i.e. outside the LAN it's running on). For the time being, we rely on ZeroTier, an open source project
                that allows you to create private VPNs. We recognize that this is not for the faint of heart, and will
                provide a more seamless solution in the future.
            </p>

            <p>
                In order to use ZeroTier, you must create an account, set up a network, and run the client on any
                devices
                that are running or would like to access OpenCola.
            </p>

            <p>
                To create an account, go to [ZeroTier](https://www.zerotier.com/) and sign up. Once signed, up, navigate
                to
                your [networks](https://my.zerotier.com/network), which should look something like:
            </p>

            <div class="centered">
                <img class="example-img" src="img/zt-create-network.png" alt="Create Network"/>
            </div>


            <p>
                Click "Create A Network". A network with a random name will be created, something like:
            </p>

            <div class="centered">
                <img class="example-img" src="img/zt-network-created.png" alt="Network Created"/>
            </div>

            <p>
                Click on the network to edit it. While there are many settings on the page, you can just use the
                defaults.
                It is helpful to give the network a meaningful name (e.g. opencola):
            </p>

            <div class="centered">
                <img class="example-img" src="img/zt-edit-network.png" alt="Edit Network"/>
            </div>

            <p>
                Take note of the network id (in this case, 632ea290854c7435). For each device you would like to add to
                the network, [download](https://www.zerotier.com/download/) and install the client. Once installed, you
                need to join the network. To do this, open ZeroTier on your device and add your network:
            </p>

            <ul>
                <li>
                    On Mac, click the ZeroTier icon in your menu bar, "Open Control Panel", and enter the network id in
                    the box beside "Join Network" at the bottom.
                </li>
                <li>
                    On iOS, open the app, click + at the top right, Accept the terms and then enter the NetworkId
                </li>
                <li>
                    Other OSs we haven't tried yet, but the process will be similar.
                </li>
            </ul>

            <p>
                Once your devices have been added, return to the network and scroll to the "Members" section and check
                the "Auth?" box beside the addresses you've added.
            </p>

            <div class="centered">
                <img class="example-img" src="img/zt-edit-members.png" alt="Edit Members"/>
            </div>

            <p>
                Each device will now have an additional ip address assigned, which will be in the range set for the
                network (scroll to IPv4 Auto-Assign in the network config):
            </p>

            <div class="centered">
                <img class="example-img" src="img/zt-ip-address.png" alt="Ip Address"/>
            </div>

            <p>
                Go to go the machine running opencola (that you should have installed ZeroTier on) and restart the
                server. If you check the logs, there will you'll notice new access urls that with a new ip address. You
                can use these addresses to access OpenCola from anywhere. The VPN is private and secure (traffic is
                encrypted), so you can use http if you like, or https to be extra safe. If you decide to use https, make
                sure to regenerate new certificates (that will include the ZeroTier ip address), as described
                <a href="#certificates">here</a>.
            </p>
        </section>
    </div>
</div>
<!-- <script src="js/help.js" type="text/javascript"></script> -->
</body>
</html>
